<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Visualizing and Comparing Categorical Variables – Introduction to Data Science</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../slides/01-tabular-data-summaries.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../slides/00-welcome.html">Lecture Slides</a></li><li class="breadcrumb-item"><a href="../slides/02-conditional-distributions.html">Week 1, Part 2 - Visualizing and Comparing Categorical Variables</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-center sidebar-header">
      <a href="../index.html" class="sidebar-logo-link">
      <img src="../images/allison-horst-galaxy.jpg" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
      <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/atheobold/data-301" title="GitHub organization" class="quarto-navigation-tool px-1" aria-label="GitHub organization"><i class="bi bi-github"></i></a>
    <a href="https://canvas.calpoly.edu" title="Cal Poly Canvas" class="quarto-navigation-tool px-1" aria-label="Cal Poly Canvas"><i class="bi bi-person-fill"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false">
 <span class="menu-text">Course information</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../course-materials/syllabus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Syllabus</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Schedule</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Lecture Slides</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../slides/00-welcome.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 0 - Welcome &amp; Course Set-up</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../slides/01-tabular-data-summaries.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 1, Part 1 - Tabular Data and Variable Summaries</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../slides/02-conditional-distributions.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Week 1, Part 2 - Visualizing and Comparing Categorical Variables</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#the-story-so-far" id="toc-the-story-so-far" class="nav-link active" data-scroll-target="#the-story-so-far">The story so far</a>
  <ul class="collapse">
  <li><a href="#getting-and-prepping-data" id="toc-getting-and-prepping-data" class="nav-link" data-scroll-target="#getting-and-prepping-data">Getting and Prepping Data</a></li>
  <li><a href="#thinking-about-variable-types" id="toc-thinking-about-variable-types" class="nav-link" data-scroll-target="#thinking-about-variable-types">Thinking About Variable Types</a></li>
  <li><a href="#accessing-rows-and-columns" id="toc-accessing-rows-and-columns" class="nav-link" data-scroll-target="#accessing-rows-and-columns">Accessing Rows and Columns</a></li>
  <li><a href="#quick-summary-of-quantitative-variables" id="toc-quick-summary-of-quantitative-variables" class="nav-link" data-scroll-target="#quick-summary-of-quantitative-variables">Quick Summary of Quantitative Variables</a></li>
  <li><a href="#summarizing-categorical-variables" id="toc-summarizing-categorical-variables" class="nav-link" data-scroll-target="#summarizing-categorical-variables">Summarizing Categorical Variables</a></li>
  </ul></li>
  <li><a href="#visualizing-one-categorical-variable" id="toc-visualizing-one-categorical-variable" class="nav-link" data-scroll-target="#visualizing-one-categorical-variable">Visualizing One Categorical Variable</a>
  <ul class="collapse">
  <li><a href="#the-grammar-of-graphics" id="toc-the-grammar-of-graphics" class="nav-link" data-scroll-target="#the-grammar-of-graphics">The Grammar of Graphics</a></li>
  <li><a href="#example" id="toc-example" class="nav-link" data-scroll-target="#example">Example</a></li>
  <li><a href="#plotnine" id="toc-plotnine" class="nav-link" data-scroll-target="#plotnine">plotnine</a></li>
  <li><a href="#themes" id="toc-themes" class="nav-link" data-scroll-target="#themes">Themes</a></li>
  <li><a href="#check-in" id="toc-check-in" class="nav-link" data-scroll-target="#check-in">Check-In</a></li>
  <li><a href="#bar-plots" id="toc-bar-plots" class="nav-link" data-scroll-target="#bar-plots">Bar Plots</a></li>
  <li><a href="#calculating-percents" id="toc-calculating-percents" class="nav-link" data-scroll-target="#calculating-percents">Calculating Percents</a></li>
  <li><a href="#percents-on-plots" id="toc-percents-on-plots" class="nav-link" data-scroll-target="#percents-on-plots">Percents on Plots</a></li>
  </ul></li>
  <li><a href="#visualizing-two-categorical-variables" id="toc-visualizing-two-categorical-variables" class="nav-link" data-scroll-target="#visualizing-two-categorical-variables">Visualizing Two Categorical Variables</a>
  <ul class="collapse">
  <li><a href="#option-1-stacked-bar-plot" id="toc-option-1-stacked-bar-plot" class="nav-link" data-scroll-target="#option-1-stacked-bar-plot">Option 1: Stacked Bar Plot</a></li>
  <li><a href="#option-1-stacked-bar-plot-1" id="toc-option-1-stacked-bar-plot-1" class="nav-link" data-scroll-target="#option-1-stacked-bar-plot-1">Option 1: Stacked Bar Plot</a></li>
  <li><a href="#option-2-side-by-side-bar-plot" id="toc-option-2-side-by-side-bar-plot" class="nav-link" data-scroll-target="#option-2-side-by-side-bar-plot">Option 2: Side-by-Side Bar Plot</a></li>
  <li><a href="#option-2-side-by-side-bar-plot-1" id="toc-option-2-side-by-side-bar-plot-1" class="nav-link" data-scroll-target="#option-2-side-by-side-bar-plot-1">Option 2: Side-by-side Bar Plot</a></li>
  <li><a href="#option-3-stacked-percentage-bar-plot" id="toc-option-3-stacked-percentage-bar-plot" class="nav-link" data-scroll-target="#option-3-stacked-percentage-bar-plot">Option 3: Stacked Percentage Bar Plot</a></li>
  <li><a href="#option-3-stacked-percentage-bar-plot-1" id="toc-option-3-stacked-percentage-bar-plot-1" class="nav-link" data-scroll-target="#option-3-stacked-percentage-bar-plot-1">Option 3: Stacked Percentage Bar Plot</a></li>
  <li><a href="#activity-1.2" id="toc-activity-1.2" class="nav-link" data-scroll-target="#activity-1.2">Activity 1.2</a></li>
  </ul></li>
  <li><a href="#joint-distributions" id="toc-joint-distributions" class="nav-link" data-scroll-target="#joint-distributions">Joint distributions</a>
  <ul class="collapse">
  <li><a href="#two-categorical-variables" id="toc-two-categorical-variables" class="nav-link" data-scroll-target="#two-categorical-variables">Two Categorical Variables</a></li>
  <li><a href="#two-way-table" id="toc-two-way-table" class="nav-link" data-scroll-target="#two-way-table">Two-way Table</a></li>
  <li><a href="#two-way-table---percents" id="toc-two-way-table---percents" class="nav-link" data-scroll-target="#two-way-table---percents">Two-way Table - Percents</a></li>
  <li><a href="#switching-variable-order" id="toc-switching-variable-order" class="nav-link" data-scroll-target="#switching-variable-order">Switching Variable Order</a></li>
  <li><a href="#interpretation" id="toc-interpretation" class="nav-link" data-scroll-target="#interpretation">Interpretation</a></li>
  <li><a href="#conditional-distribution-from-counts" id="toc-conditional-distribution-from-counts" class="nav-link" data-scroll-target="#conditional-distribution-from-counts">Conditional Distribution from Counts</a></li>
  <li><a href="#conditional-distribution-from-percentages" id="toc-conditional-distribution-from-percentages" class="nav-link" data-scroll-target="#conditional-distribution-from-percentages">Conditional Distribution from Percentages</a></li>
  <li><a href="#swapping-variables" id="toc-swapping-variables" class="nav-link" data-scroll-target="#swapping-variables">Swapping Variables</a></li>
  <li><a href="#which-one-to-condition-on" id="toc-which-one-to-condition-on" class="nav-link" data-scroll-target="#which-one-to-condition-on">Which one to condition on?</a></li>
  <li><a href="#calculating-in-python" id="toc-calculating-in-python" class="nav-link" data-scroll-target="#calculating-in-python">Calculating in Python</a></li>
  <li><a href="#calculating-in-python-1" id="toc-calculating-in-python-1" class="nav-link" data-scroll-target="#calculating-in-python-1">Calculating in Python</a></li>
  <li><a href="#check-in-1" id="toc-check-in-1" class="nav-link" data-scroll-target="#check-in-1">Check-In</a></li>
  <li><a href="#check-in-2" id="toc-check-in-2" class="nav-link" data-scroll-target="#check-in-2">Check-In</a></li>
  <li><a href="#conditional-on-class" id="toc-conditional-on-class" class="nav-link" data-scroll-target="#conditional-on-class">Conditional on Class</a></li>
  <li><a href="#what-if-you-get-it-backwards" id="toc-what-if-you-get-it-backwards" class="nav-link" data-scroll-target="#what-if-you-get-it-backwards">What if you get it backwards?</a></li>
  <li><a href="#which-plot-better-answers-the-question" id="toc-which-plot-better-answers-the-question" class="nav-link" data-scroll-target="#which-plot-better-answers-the-question">Which plot better answers the question:</a></li>
  </ul></li>
  <li><a href="#takeaways" id="toc-takeaways" class="nav-link" data-scroll-target="#takeaways">Takeaways</a>
  <ul class="collapse">
  <li><a href="#takeaways-1" id="toc-takeaways-1" class="nav-link" data-scroll-target="#takeaways-1">Takeaways</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/atheobold/data-301/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div><div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="02-conditional-distributions.html"><i class="bi bi-file-slides"></i>RevealJS</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../slides/00-welcome.html">Lecture Slides</a></li><li class="breadcrumb-item"><a href="../slides/02-conditional-distributions.html">Week 1, Part 2 - Visualizing and Comparing Categorical Variables</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Visualizing and Comparing Categorical Variables</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="the-story-so-far" class="level1">
<h1>The story so far</h1>
<section id="getting-and-prepping-data" class="level2">
<h2 class="anchored" data-anchor-id="getting-and-prepping-data">Getting and Prepping Data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">"https://datasci112.stanford.edu/data/titanic.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"pclass"</span>] <span class="op">=</span> df[<span class="st">"pclass"</span>].astype(<span class="st">"category"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"survived"</span>] <span class="op">=</span> df[<span class="st">"survived"</span>].astype(<span class="st">"category"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="thinking-about-variable-types" class="level2">
<h2 class="anchored" data-anchor-id="thinking-about-variable-types">Thinking About Variable Types</h2>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 28%">
<col style="width: 4%">
<col style="width: 5%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 4%">
<col style="width: 5%">
<col style="width: 4%">
<col style="width: 5%">
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 19%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">name</th>
<th style="text-align: left;">pclass</th>
<th style="text-align: left;">survived</th>
<th style="text-align: left;">sex</th>
<th style="text-align: right;">age</th>
<th style="text-align: right;">sibsp</th>
<th style="text-align: right;">parch</th>
<th style="text-align: left;">ticket</th>
<th style="text-align: right;">fare</th>
<th style="text-align: left;">cabin</th>
<th style="text-align: left;">embarked</th>
<th style="text-align: left;">boat</th>
<th style="text-align: right;">body</th>
<th style="text-align: left;">home.dest</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Allen, Miss. Elisabeth Walton</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">29.0000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">24160</td>
<td style="text-align: right;">211.3375</td>
<td style="text-align: left;">B5</td>
<td style="text-align: left;">S</td>
<td style="text-align: left;">2</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: left;">St Louis, MO</td>
</tr>
<tr class="even">
<td style="text-align: left;">Allison, Master. Hudson Trevor</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">0.9167</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">113781</td>
<td style="text-align: right;">151.5500</td>
<td style="text-align: left;">C22 C26</td>
<td style="text-align: left;">S</td>
<td style="text-align: left;">11</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: left;">Montreal, PQ / Chesterville, ON</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Allison, Miss. Helen Loraine</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">2.0000</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">113781</td>
<td style="text-align: right;">151.5500</td>
<td style="text-align: left;">C22 C26</td>
<td style="text-align: left;">S</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: left;">Montreal, PQ / Chesterville, ON</td>
</tr>
<tr class="even">
<td style="text-align: left;">Allison, Mr.&nbsp;Hudson Joshua Creighton</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">30.0000</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">113781</td>
<td style="text-align: right;">151.5500</td>
<td style="text-align: left;">C22 C26</td>
<td style="text-align: left;">S</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">135</td>
<td style="text-align: left;">Montreal, PQ / Chesterville, ON</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Allison, Mrs.&nbsp;Hudson J C (Bessie Waldo Daniels)</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">25.0000</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">113781</td>
<td style="text-align: right;">151.5500</td>
<td style="text-align: left;">C22 C26</td>
<td style="text-align: left;">S</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: left;">Montreal, PQ / Chesterville, ON</td>
</tr>
<tr class="even">
<td style="text-align: left;">Anderson, Mr.&nbsp;Harry</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">48.0000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">19952</td>
<td style="text-align: right;">26.5500</td>
<td style="text-align: left;">E12</td>
<td style="text-align: left;">S</td>
<td style="text-align: left;">3</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: left;">New York, NY</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="accessing-rows-and-columns" class="level2">
<h2 class="anchored" data-anchor-id="accessing-rows-and-columns">Accessing Rows and Columns</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>df.iloc[<span class="dv">5</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>name         Anderson, Mr. Harry
pclass                         1
survived                       1
sex                         male
age                         48.0
sibsp                          0
parch                          0
ticket                     19952
fare                       26.55
cabin                        E12
embarked                       S
boat                           3
body                         NaN
home.dest           New York, NY
Name: 5, dtype: object</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"name"</span>].head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0                      Allen, Miss. Elisabeth Walton
1                     Allison, Master. Hudson Trevor
2                       Allison, Miss. Helen Loraine
3               Allison, Mr. Hudson Joshua Creighton
4    Allison, Mrs. Hudson J C (Bessie Waldo Daniels)
Name: name, dtype: object</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="quick-summary-of-quantitative-variables" class="level2">
<h2 class="anchored" data-anchor-id="quick-summary-of-quantitative-variables">Quick Summary of Quantitative Variables</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>df.describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               age        sibsp        parch         fare        body
count  1046.000000  1309.000000  1309.000000  1308.000000  121.000000
mean     29.881135     0.498854     0.385027    33.295479  160.809917
std      14.413500     1.041658     0.865560    51.758668   97.696922
min       0.166700     0.000000     0.000000     0.000000    1.000000
25%      21.000000     0.000000     0.000000     7.895800   72.000000
50%      28.000000     0.000000     0.000000    14.454200  155.000000
75%      39.000000     1.000000     0.000000    31.275000  256.000000
max      80.000000     8.000000     9.000000   512.329200  328.000000</code></pre>
</div>
</div>
</section>
<section id="summarizing-categorical-variables" class="level2">
<h2 class="anchored" data-anchor-id="summarizing-categorical-variables">Summarizing Categorical Variables</h2>
<p>The list of percents for each category is called the <strong>distribution</strong> of the variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"pclass"</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>pclass
3    709
1    323
2    277
Name: count, dtype: int64</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"pclass"</span>].value_counts(normalize <span class="op">=</span> <span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>pclass
3    0.541635
1    0.246753
2    0.211612
Name: proportion, dtype: float64</code></pre>
</div>
</div>
</section>
</section>
<section id="visualizing-one-categorical-variable" class="level1">
<h1>Visualizing One Categorical Variable</h1>
<section id="the-grammar-of-graphics" class="level2">
<h2 class="anchored" data-anchor-id="the-grammar-of-graphics">The Grammar of Graphics</h2>
<p>The <em>grammar of graphics</em> is a framework for creating data visualizations.</p>
<p>A visualization consists of:</p>
<ul>
<li><p>The <strong>aesthetic</strong>: Which <em>variables</em> are dictating which <em>plot elements</em>.</p></li>
<li><p>The <strong>geometry</strong>: What <em>shape</em> of plot you are making.</p></li>
<li><p>The <strong>theme</strong>: Other choices about the appearance.</p></li>
</ul>
</section>
<section id="example" class="level2">
<h2 class="anchored" data-anchor-id="example">Example</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="small">
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> palmerpenguins <span class="im">import</span> load_penguins</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> plotnine <span class="im">import</span> ggplot, geom_point, aes, geom_boxplot</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>penguins <span class="op">=</span> load_penguins()</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  ggplot(data <span class="op">=</span> penguins, mapping <span class="op">=</span> aes(x <span class="op">=</span> <span class="st">"species"</span>, </span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>                                        y <span class="op">=</span> <span class="st">"bill_length_mm"</span>, </span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>                                        fill <span class="op">=</span> <span class="st">"sex"</span>)</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>        ) <span class="op">+</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>  geom_boxplot()</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-conditional-distributions_files/figure-html/boxplot-1.png" class="img-fluid figure-img" width="614"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
<p>. . .</p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Aesthetics</strong></p>
<p>Where are variables mapped to aspects of the plot?</p>
</div><div class="column" style="width:50%;">
<div class="fragment">
<p><strong>Geometry</strong></p>
<p>What shape(s) are used to represent the data / observations?</p>
</div>
</div>
</div>
</section>
<section id="plotnine" class="level2">
<h2 class="anchored" data-anchor-id="plotnine">plotnine</h2>
<p>The <code>plotnine</code> library implements the <em>grammar of graphics</em> in Python.</p>
<ul>
<li>The <code>aes()</code> function is the place to map variables to plot aesthetics.
<ul>
<li><code>x</code>, <code>y</code>, and <code>fill</code> are three possible aesthetics that can be specified</li>
</ul></li>
<li>A variety of <code>geom_XXX()</code> functions allow for different plotting shapes (e.g.&nbsp;boxplot, histogram, etc.)
<ul>
<li>Aesthetics can differ based on the <code>geom</code> you choose!</li>
</ul></li>
</ul>
</section>
<section id="themes" class="level2">
<h2 class="anchored" data-anchor-id="themes">Themes</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="small">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  ggplot(data <span class="op">=</span> penguins, mapping <span class="op">=</span> aes(x <span class="op">=</span> <span class="st">"species"</span>, </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>                                        y <span class="op">=</span> <span class="st">"bill_length_mm"</span>, </span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>                                        fill <span class="op">=</span> <span class="st">"species"</span>)</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>         ) <span class="op">+</span> </span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  geom_boxplot()</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-conditional-distributions_files/figure-html/boxplot-no-theme-plot-3.png" class="img-fluid figure-img" width="614"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="small">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> plotnine <span class="im">import</span> theme_bw</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  ggplot(penguins, aes(x <span class="op">=</span> <span class="st">"species"</span>, </span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>                       y <span class="op">=</span> <span class="st">"bill_length_mm"</span>, </span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>                       fill <span class="op">=</span> <span class="st">"sex"</span>)</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>                       ) <span class="op">+</span> </span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>  geom_boxplot() <span class="op">+</span> </span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>  theme_bw()</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-conditional-distributions_files/figure-html/boxplot-theme-classic-plot-5.png" class="img-fluid figure-img" width="614"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="check-in" class="level2">
<h2 class="anchored" data-anchor-id="check-in">Check-In</h2>
<p>What are the <em>aesthetics</em> and <em>geometry</em> in the cartoon plot below?</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://imgs.xkcd.com/comics/escalators.png" class="img-fluid figure-img" alt="A graph showing the 'urge to try running up the down escalator' (y-axis) against age (x-axis). The y-axis ranges from weak to strong, and the x-axis spans ages 0 to 24. Two lines are plotted: 'What I was supposed to feel,' which peaks at age 10 and declines steeply thereafter; and 'What I've actually felt,' which remains high and relatively flat after age 10. Stick figures are drawn on the graph to illustrate the difference, with labels pointing to key points."></p>
<figcaption>An XKCD comic</figcaption>
</figure>
</div>
</section>
<section id="bar-plots" class="level2">
<h2 class="anchored" data-anchor-id="bar-plots">Bar Plots</h2>
<p>To visualize the <strong>distribution</strong> of a categorical variable, we should use a <strong>bar plot</strong>.</p>
<div class="small">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> plotnine <span class="im">import</span> <span class="op">*</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  ggplot(data <span class="op">=</span> df, mapping <span class="op">=</span> aes(x <span class="op">=</span> <span class="st">"pclass"</span>)) <span class="op">+</span> </span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  geom_bar() <span class="op">+</span> </span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  theme_bw()</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-conditional-distributions_files/figure-html/bar-plot-7.png" class="img-fluid figure-img" width="614"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="calculating-percents" class="level2">
<h2 class="anchored" data-anchor-id="calculating-percents">Calculating Percents</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>pclass_dist <span class="op">=</span> (</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  df[<span class="st">'pclass'</span>]</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  .value_counts(normalize <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  .to_frame()</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  .reset_index()</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>pclass_dist</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  pclass  proportion
0      3    0.541635
1      1    0.246753
2      2    0.211612</code></pre>
</div>
</div>
</section>
<section id="percents-on-plots" class="level2">
<h2 class="anchored" data-anchor-id="percents-on-plots">Percents on Plots</h2>
<div class="small">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  ggplot(data <span class="op">=</span> pclass_dist, </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>         mapping <span class="op">=</span> aes(x <span class="op">=</span> <span class="st">"pclass"</span>, y <span class="op">=</span> <span class="st">"proportion"</span>)) <span class="op">+</span> </span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  geom_col() <span class="op">+</span> <span class="co">### notice this change to a column plot!</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  theme_bw()</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div class="columns">
<div class="column" style="width:55%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-conditional-distributions_files/figure-html/proportion-bar-plot-9.png" class="img-fluid figure-img" width="614"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:5%;">

</div><div class="column" style="width:40%;">
<div class="fragment">
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Technically, you could still use <code>geom_bar()</code>, but you would need to specify that you didn’t want it to use <code>stat = "count"</code> (the default). You’ve already calculated the proportions, so you would use <code>geom_bar(stat = "identity")</code>.</p>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="visualizing-two-categorical-variables" class="level1">
<h1>Visualizing Two Categorical Variables</h1>
<section id="option-1-stacked-bar-plot" class="level2">
<h2 class="anchored" data-anchor-id="option-1-stacked-bar-plot">Option 1: Stacked Bar Plot</h2>
<div class="small">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  ggplot(data <span class="op">=</span> df, mapping <span class="op">=</span> aes(x <span class="op">=</span> <span class="st">"pclass"</span>, fill <span class="op">=</span> <span class="st">"sex"</span>)) <span class="op">+</span> </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  geom_bar(position <span class="op">=</span> <span class="st">"stack"</span>) <span class="op">+</span> </span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  theme_bw()</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="02-conditional-distributions_files/figure-html/stacked-bar-plot-11.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="614"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="option-1-stacked-bar-plot-1" class="level2">
<h2 class="anchored" data-anchor-id="option-1-stacked-bar-plot-1">Option 1: Stacked Bar Plot</h2>
<blockquote class="blockquote">
<p>What are some pros and cons of the stacked bar plot?</p>
</blockquote>
<div class="columns">
<div class="column" style="width:45%;">
<div class="fragment">
<p><strong>Pros</strong></p>
<div class="midi">
<ul>
<li>We can still see the total counts in each class</li>
<li>We can easily compare the <code>male</code> counts in each class, since those bars are on the bottom.</li>
</ul>
</div>
</div>
</div><div class="column" style="width:5%;">

</div><div class="column" style="width:45%;">
<div class="fragment">
<p><strong>Cons</strong></p>
<div class="midi">
<ul>
<li>It is hard to compare the <code>female</code> counts, since those bars are stacked on top.</li>
<li>It is hard to estimate the <em>distributions</em>.</li>
</ul>
</div>
</div>
</div>
</div>
</section>
<section id="option-2-side-by-side-bar-plot" class="level2">
<h2 class="anchored" data-anchor-id="option-2-side-by-side-bar-plot">Option 2: Side-by-Side Bar Plot</h2>
<div class="small">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  ggplot(data <span class="op">=</span> df, mapping <span class="op">=</span> aes(x <span class="op">=</span> <span class="st">"pclass"</span>, fill <span class="op">=</span> <span class="st">"sex"</span>)) <span class="op">+</span> </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  geom_bar(position <span class="op">=</span> <span class="st">"dodge"</span>) <span class="op">+</span> </span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  theme_bw()</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="02-conditional-distributions_files/figure-html/side-by-side-barplot-13.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="614"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="option-2-side-by-side-bar-plot-1" class="level2">
<h2 class="anchored" data-anchor-id="option-2-side-by-side-bar-plot-1">Option 2: Side-by-side Bar Plot</h2>
<blockquote class="blockquote">
<p>What are some pros and cons of the side-by-side bar plot?</p>
</blockquote>
<div class="columns">
<div class="column" style="width:45%;">
<div class="fragment">
<p><strong>Pros</strong></p>
<div class="midi">
<ul>
<li><p>We can easily compare the <code>female</code> counts in each class.</p></li>
<li><p>We can easily compare the <code>male</code> counts in each class.</p></li>
<li><p>We can easily see counts of each within each class.</p></li>
</ul>
</div>
</div>
</div><div class="column" style="width:5%;">

</div><div class="column" style="width:45%;">
<div class="fragment">
<p><strong>Cons</strong></p>
<div class="midi">
<ul>
<li><p>It is hard to see <em>total</em> counts in each class.</p></li>
<li><p>It is hard to estimate the <em>distributions</em>.</p></li>
</ul>
</div>
</div>
</div>
</div>
</section>
<section id="option-3-stacked-percentage-bar-plot" class="level2">
<h2 class="anchored" data-anchor-id="option-3-stacked-percentage-bar-plot">Option 3: Stacked Percentage Bar Plot</h2>
<div class="small">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  ggplot(data <span class="op">=</span> df, mapping <span class="op">=</span> aes(x <span class="op">=</span> <span class="st">"pclass"</span>, fill <span class="op">=</span> <span class="st">"sex"</span>)) <span class="op">+</span> </span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  geom_bar(position <span class="op">=</span> <span class="st">"fill"</span>) <span class="op">+</span> </span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  theme_bw()</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="02-conditional-distributions_files/figure-html/stacked-percentage-barplot-15.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="614"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="option-3-stacked-percentage-bar-plot-1" class="level2">
<h2 class="anchored" data-anchor-id="option-3-stacked-percentage-bar-plot-1">Option 3: Stacked Percentage Bar Plot</h2>
<blockquote class="blockquote">
<p>What are some pros and cons of the stacked percentage bar plot?</p>
</blockquote>
<div class="columns">
<div class="column" style="width:60%;">
<div class="fragment">
<p><strong>Pros</strong></p>
<div class="midi">
<ul>
<li><p>This is the <strong>best</strong> way to compare sex balance across classes!</p></li>
<li><p>This is the option I use the most, because it can answer “Are you more likely to find ______ in ______ ?” type questions.</p></li>
</ul>
</div>
</div>
</div><div class="column" style="width:5%;">

</div><div class="column" style="width:35%;">
<div class="fragment">
<p><strong>Cons</strong></p>
<div class="midi">
<ul>
<li>We can no longer see <strong>any</strong> counts!</li>
</ul>
</div>
</div>
</div>
</div>
</section>
<section id="activity-1.2" class="level2">
<h2 class="anchored" data-anchor-id="activity-1.2">Activity 1.2</h2>
<div class="midi">
<p>Choose one of the plots from lecture so far and “upgrade” it.</p>
<div class="columns">
<div class="column" style="width:60%;">
<p>You can do this by:</p>
<ul>
<li><p>Finding and using a different <code>theme</code></p></li>
<li><p>Using <code>labs()</code> to change the axis labels</p></li>
<li><p>Trying different variables</p></li>
<li><p>Trying a different <em>geometries</em></p></li>
<li><p>Using <code>+ scale_fill_manual()</code> to change the colors being used</p></li>
</ul>
</div><div class="column" style="width:40%;">
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>You will need to use documentation of <code>plotnine</code> and online resources!</p></li>
<li><p>Check out <a href="https://www.data-to-viz.com/" class="uri">https://www.data-to-viz.com/</a> for ideas and example code.</p></li>
<li><p>Ask GenAI questions like, “What do I add to a plotnine bar plot to change the colors?” <em>(But of course, make sure you understand the code you use!)</em></p></li>
</ul>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="joint-distributions" class="level1">
<h1>Joint distributions</h1>
<section id="two-categorical-variables" class="level2">
<h2 class="anchored" data-anchor-id="two-categorical-variables">Two Categorical Variables</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>df[[<span class="st">"pclass"</span>, <span class="st">"sex"</span>]].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>pclass  sex   
3       male      493
        female    216
1       male      179
2       male      171
1       female    144
2       female    106
Name: count, dtype: int64</code></pre>
</div>
</div>
</section>
<section id="two-way-table" class="level2">
<h2 class="anchored" data-anchor-id="two-way-table">Two-way Table</h2>
<div class="cell" data-output-location="column">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  df[[<span class="st">"pclass"</span>, <span class="st">"sex"</span>]]</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  .value_counts()</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  .unstack()</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>sex     female  male
pclass              
1          144   179
2          106   171
3          216   493</code></pre>
</div>
</div>
<p><br></p>
<ul>
<li>This is sometimes called a <em>cross-tab</em> or <em>cross-tabulation</em>.</li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Pivot Table
</div>
</div>
<div class="callout-body-container callout-body">
<p>Essentially <code>unstack()</code> has pivoted the <code>sex</code> column from <strong>long format</strong> (where the values are included in one column) to <strong>wide format</strong> where each value has its own column.</p>
</div>
</div>
</section>
<section id="two-way-table---percents" class="level2">
<h2 class="anchored" data-anchor-id="two-way-table---percents">Two-way Table - Percents</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  df[[<span class="st">"pclass"</span>, <span class="st">"sex"</span>]]</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  .value_counts(normalize <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  .unstack()</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>sex       female      male
pclass                    
1       0.110008  0.136746
2       0.080978  0.130634
3       0.165011  0.376623</code></pre>
</div>
</div>
<p><br></p>
<ul>
<li>All of these values should sum to 1, aka, 100%!</li>
</ul>
</section>
<section id="switching-variable-order" class="level2">
<h2 class="anchored" data-anchor-id="switching-variable-order">Switching Variable Order</h2>
<p><strong>What cross-tabulation would you expect if we changed the order of the variables? In other words, what would happen if <code>"sex"</code> came first and <code>"pclass"</code> came second?</strong></p>
<p>. . .</p>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  df[[<span class="st">"sex"</span>, <span class="st">"pclass"</span>]]</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  .value_counts(normalize <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  .unstack()</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>pclass         1         2         3
sex                                 
female  0.110008  0.080978  0.165011
male    0.136746  0.130634  0.376623</code></pre>
</div>
</div>
</section>
<section id="interpretation" class="level2">
<h2 class="anchored" data-anchor-id="interpretation">Interpretation</h2>
<p>We call this the <strong><em>joint distribution</em></strong> of the two variables.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>sex       female      male
pclass                    
1       0.110008  0.136746
2       0.080978  0.130634
3       0.165011  0.376623</code></pre>
</div>
</div>
<p><br></p>
<blockquote class="blockquote">
<p>Of all the passengers on the Titanic, 11% were female passengers riding in first class.</p>
</blockquote>
<p>. . .</p>
<ul>
<li>NOT “11% of all females on Titanic…”</li>
<li>NOT “11% of all first class passengers…”</li>
</ul>
</section>
<section id="conditional-distribution-from-counts" class="level2">
<h2 class="anchored" data-anchor-id="conditional-distribution-from-counts">Conditional Distribution from Counts</h2>
<p>We know that:</p>
<ul>
<li><p>466 passengers identified as <strong>female</strong></p></li>
<li><p>Of those 466 passengers, 144 <strong>rode in first class</strong></p></li>
</ul>
<p>. . .</p>
<p>So:</p>
<ul>
<li>144 / 466 = 31% <strong>of female identifying passengers</strong> rode in first class</li>
</ul>
<p>Here we <strong><em>conditioned on</em></strong> the passenger being female, and then looked at the <strong><em>conditional distribution</em></strong> of <code>pclass</code>.</p>
</section>
<section id="conditional-distribution-from-percentages" class="level2">
<h2 class="anchored" data-anchor-id="conditional-distribution-from-percentages">Conditional Distribution from Percentages</h2>
<p>We know that:</p>
<ul>
<li><p>35.5% of all passengers identified as <strong>female</strong></p></li>
<li><p>Of those 35.5% of passengers, 11% <strong>rode in first class</strong></p></li>
</ul>
<p>So:</p>
<ul>
<li>0.11 / 0.355 = 31% <strong>of female identifying passengers</strong> rode in first class</li>
</ul>
<p>Here we <strong><em>conditioned on</em></strong> the passenger being female, and then looked at the <strong><em>conditional distribution</em></strong> of <code>pclass</code>.</p>
</section>
<section id="swapping-variables" class="level2">
<h2 class="anchored" data-anchor-id="swapping-variables">Swapping Variables</h2>
<p>We know that:</p>
<ul>
<li><p>323 passengers <strong>rode in first class</strong></p></li>
<li><p>Of those 323 passengers, 144 <strong>identified as female</strong></p></li>
</ul>
<p>So:</p>
<ul>
<li>144 / 323 = 44.6% <strong>of first class passengers</strong> identified as female</li>
</ul>
<p>Here we <strong><em>conditioned on</em></strong> the passenger being in first class, and then looked at the <strong><em>conditional distribution</em></strong> of <code>sex</code>.</p>
</section>
<section id="which-one-to-condition-on" class="level2">
<h2 class="anchored" data-anchor-id="which-one-to-condition-on">Which one to condition on?</h2>
<p>This depends on the <strong>research question</strong> you are trying to answer.</p>
<p>. . .</p>
<blockquote class="blockquote">
<p>“What class did most female identifying passengers ride in?”</p>
</blockquote>
<p>-&gt; Of all <em>female passengers</em>, what is the conditional distribution of <em>class</em>?</p>
<p>. . .</p>
<blockquote class="blockquote">
<p>“What was the gender breakdown of first class?”</p>
</blockquote>
<p>-&gt; Of all <em>first class passengers</em>, what is the conditional distribution of <em>sex</em>?</p>
</section>
<section id="calculating-in-python" class="level2">
<h2 class="anchored" data-anchor-id="calculating-in-python">Calculating in Python</h2>
<div class="midi">
<p>When we study two variables, we call the individual one-variable distributions the <strong>marginal distribution</strong> of that variable.</p>
</div>
<div class="columns">
<div class="column" style="width:47%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>marginal_class <span class="op">=</span> (</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  df[<span class="st">'pclass'</span>]</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  .value_counts(normalize <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>marginal_class</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>pclass
3    0.541635
1    0.246753
2    0.211612
Name: proportion, dtype: float64</code></pre>
</div>
</div>
</div><div class="column" style="width:3%;">

</div><div class="column" style="width:48%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>marginal_sex <span class="op">=</span> (</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  df[<span class="st">'sex'</span>]</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  .value_counts(normalize <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>marginal_sex</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>sex
male      0.644003
female    0.355997
Name: proportion, dtype: float64</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="calculating-in-python-1" class="level2">
<h2 class="anchored" data-anchor-id="calculating-in-python-1">Calculating in Python</h2>
<div class="midi">
<p>We need to divide the <strong>joint distribution</strong> (e.g.&nbsp;“11% of passengers were first class female”) by the <strong>marginal distribution</strong> of the variable we want to <strong>condition on</strong> (e.g.&nbsp;35.5% of passengers were female).</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>joint_class_sex <span class="op">=</span> (</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  df[[<span class="st">"pclass"</span>, <span class="st">"sex"</span>]]</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  .value_counts(normalize <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>  .unstack()</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>joint_class_sex.divide(marginal_sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>sex       female      male
pclass                    
1       0.309013  0.212337
2       0.227468  0.202847
3       0.463519  0.584816</code></pre>
</div>
</div>
</section>
<section id="check-in-1" class="level2">
<h2 class="anchored" data-anchor-id="check-in-1">Check-In</h2>
<div class="columns">
<div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>marginal_sex</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>sex
male      0.644003
female    0.355997
Name: proportion, dtype: float64</code></pre>
</div>
</div>
</div><div class="column" style="width:5%;">

</div><div class="column" style="width:55%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>joint_class_sex</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>sex       female      male
pclass                    
1       0.110008  0.136746
2       0.080978  0.130634
3       0.165011  0.376623</code></pre>
</div>
</div>
</div>
</div>
<p><br></p>
<div class="columns">
<div class="column" style="width:65%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>joint_class_sex.divide(marginal_sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>sex       female      male
pclass                    
1       0.309013  0.212337
2       0.227468  0.202847
3       0.463519  0.584816</code></pre>
</div>
</div>
</div><div class="column" style="width:5%;">

</div><div class="column" style="width:30%;">
<p><strong>How do you think <code>divide()</code> works?</strong></p>
</div>
</div>
</section>
<section id="check-in-2" class="level2">
<h2 class="anchored" data-anchor-id="check-in-2">Check-In</h2>
<p>Should the <strong>rows</strong> or <strong>columns</strong> add up to 100%? Why?</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>sex       female      male
pclass                    
1       0.309013  0.212337
2       0.227468  0.202847
3       0.463519  0.584816</code></pre>
</div>
</div>
</section>
<section id="conditional-on-class" class="level2">
<h2 class="anchored" data-anchor-id="conditional-on-class">Conditional on Class</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>joint_class_sex <span class="op">=</span> (</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  df[[<span class="st">"sex"</span>, <span class="st">"pclass"</span>]]</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  .value_counts(normalize <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>  .unstack()</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>joint_class_sex.divide(marginal_class)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>pclass        1         2         3
sex                                
female  0.44582  0.382671  0.304654
male    0.55418  0.617329  0.695346</code></pre>
</div>
</div>
</section>
<section id="what-if-you-get-it-backwards" class="level2">
<h2 class="anchored" data-anchor-id="what-if-you-get-it-backwards">What if you get it backwards?</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>joint_class_sex <span class="op">=</span> (</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  df[[<span class="st">"pclass"</span>, <span class="st">"sex"</span>]]</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>  .value_counts(normalize <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>  .unstack()</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>joint_class_sex.divide(marginal_class)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         1   2   3  female  male
pclass                          
1      NaN NaN NaN     NaN   NaN
2      NaN NaN NaN     NaN   NaN
3      NaN NaN NaN     NaN   NaN</code></pre>
</div>
</div>
</section>
<section id="which-plot-better-answers-the-question" class="level2">
<h2 class="anchored" data-anchor-id="which-plot-better-answers-the-question">Which plot better answers the question:</h2>
<blockquote class="blockquote">
<p>“Did women tend to ride in first class more than men?”</p>
</blockquote>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>  ggplot(df, aes(x <span class="op">=</span> <span class="st">"pclass"</span>, fill <span class="op">=</span> <span class="st">"sex"</span>)) <span class="op">+</span> </span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>  geom_bar(position <span class="op">=</span> <span class="st">"fill"</span>) <span class="op">+</span> </span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>  theme_bw()</span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-conditional-distributions_files/figure-html/filled-bar-plot-question-17.png" class="img-fluid figure-img" width="614"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>  ggplot(df, aes(x <span class="op">=</span> <span class="st">"sex"</span>, fill <span class="op">=</span> <span class="st">"pclass)) + </span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="er">  geom_bar</span>(position <span class="op">=</span> <span class="st">"fill"</span>) <span class="op">+</span> </span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>  theme_bw()</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-conditional-distributions_files/figure-html/filled-bar-plot-question-2-19.png" class="img-fluid figure-img" width="614"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="takeaways" class="level1">
<h1>Takeaways</h1>
<section id="takeaways-1" class="level2">
<h2 class="anchored" data-anchor-id="takeaways-1">Takeaways</h2>
<div class="midi">
<div class="incremental">
<ul class="incremental">
<li><p>We use <code>plotnine</code> and the <strong>grammar of graphics</strong> to make visuals.</p></li>
<li><p>For two categorical variables, we might use a <strong>stacked bar plot</strong>, a <strong>side-by-side bar plot</strong>, or a <strong>stacked percentage bar plot</strong> - depending on what we are trying to show.</p></li>
<li><p>The <strong>joint distribution</strong> of two variables gives the percents in each subcategory.</p></li>
<li><p>The <strong>marginal distribution</strong> of a variable is its individual distribution.</p></li>
<li><p>The <strong>conditional distribution</strong> of a variable is its distribution among <em>only one category</em> of a different variable.</p></li>
<li><p>We calculate the <strong>conditional distribution</strong> by dividing the <strong>joint</strong> by the <strong>marginal</strong>.</p></li>
</ul>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/github\.com\/atheobold\/data-301");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../slides/01-tabular-data-summaries.html" class="pagination-link" aria-label="Week 1, Part 1 - Tabular Data and Variable Summaries">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Week 1, Part 1 - Tabular Data and Variable Summaries</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>© Copyright 2025, Allison Theobold</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/atheobold/data-301/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
<p>This page is built with ❤️ and <a href="https://quarto.org/">Quarto</a>.</p>
</div>
  </div>
</footer>




</body></html>